{% extends "reports/base.html" %}
{% block title %}Крутое название сайта{% endblock %}
{% block content %}

<!-- Подключаем стили для DataTables -->
<link href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" rel="stylesheet">

<h2>Таблица данных</h2>
<table id="activityTable" class="display" style="width:calc(100% - 20px)">
    <thead>
        <tr>
            <th>Наименование мероприятия</th>
            <th>План</th>
            <th>РФ</th>
            <th>МБ</th>
            <th>ВНБ</th>
            <th>Факт</th>
            <th>РБ</th>
            <th>МБ</th>
            <th>ВНБ</th>
            <th>Отношение фактически освоенного к предусмотренному объему</th>
            <th>Действия</th> <!-- Добавляем колонку для кнопок -->
        </tr>
    </thead>
    <tbody>
        {% for indicator in indicators %}
        <tr>
            <td>{{ indicator.name }}</td>
            <td>{{ indicator.planned_sum }}</td>
            <td>{{ indicator.rf_set }}</td>
            <td>{{ indicator.mb_set }}</td>
            <td>{{ indicator.vnb_set }}</td>
            <td>{{ indicator.actual_sum }}</td>
            <td>{{ indicator.rf_actually }}</td>
            <td>{{ indicator.mb_actually }}</td>
            <td>{{ indicator.vnb_actually }}</td>
            <td>{{ indicator.mastered_to_unmastered }}</td>
            <td>
                <a href="{% url 'edit_indicator_two' indicator.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                <a href="{% url 'delete_indicator_two' indicator.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Вы уверены, что хотите удалить этот элемент?')">Удалить</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Сохранить</button>
</form>

<!-- Подключаем скрипты для DataTables -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function() {
        $('#activityTable').DataTable({
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.21/i18n/Russian.json"
            }
        });
    });
</script>

{% endblock %}
